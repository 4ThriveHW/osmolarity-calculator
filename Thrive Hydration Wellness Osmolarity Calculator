<style>
#mx_cl *, ::after, ::before {
    box-sizing: border-box;
}
#mx_cl {
    line-height: 1.5;
    font-family: inherit;
}
#mx_cl .container {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #000000;
    text-align: left;
}
#mx_cl label {
    display: inline-block;
    font-size: 16px;
    font-weight: 500;
    margin-bottom: 0.5rem;
}
#mx_cl .table {
    width: 100%;
    max-width: 100%;
    margin-bottom: 0rem;
    background-color: transparent;
    border-collapse: collapse;
}
#mx_cl .table td, #mx_cl .table th {
    padding: 0.25rem 0.25rem;
    vertical-align: middle;
    border-right: none !important;
    border-left: none !important;
    border-top: none !important;
    border-bottom: 1px solid #06acc1;
    font-size: 14px;
    background: transparent;
    box-shadow: none;
    color: #ffffff;
    text-align: left;
}
#mx_cl .table th {
    font-weight: 500;
}
#mx_cl .row {
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
}
#mx_cl .col-md-1, #mx_cl .col-md-10, #mx_cl .col-md-11, #mx_cl .col-md-12, #mx_cl .col-md-2, #mx_cl .col-md-3, #mx_cl .col-md-4, #mx_cl .col-md-5, #mx_cl .col-md-6, #mx_cl .col-md-7, #mx_cl .col-md-8, #mx_cl .col-md-9 {
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
}
#mx_cl .form-group {
    margin-bottom: 1rem;
}
#mx_cl .form-control {
    display: block;
    width: 100%;
    height: calc(1em + 0.75rem + 2px);
    padding: 0.275rem 0.75rem;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
    color: #000000;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #dddddd;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
#mx_cl .form-control:focus {
    outline: none;
}
#mx_cl .text-center {
    text-align: center!important;
}
#mx_cl .btn {
    display: inline-block;
    font-weight: 400;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    cursor: pointer;
    border: 1px solid transparent;
    padding: 0.275rem 0.75rem;
    font-size: 14px;
    line-height: 1.5;
    border-radius: 25px;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
#mx_cl .btn-primary {
    color: #fff;
    background-color: #2BBACC;
    border-color: #2BBACC;
    margin: 0;
}
#mx_cl .btn-primary:hover {
    color: #fff;
    background-color: #2BBACC;
    border-color: #2BBACC;
}
@media (min-width: 576px){
    #mx_cl .container {
        max-width: 540px;
    }
}
@media (min-width: 768px){
    #mx_cl .container {
        max-width: 100%;
    }
    #mx_cl .col-md-12 {
        -ms-flex: 0 0 100%;
        flex: 0 0 100%;
        max-width: 100%;
    }
    #mx_cl .col-md-8 {
        -ms-flex: 0 0 66.666667%;
        flex: 0 0 66.666667%;
        max-width: 66.666667%;
    }
    #mx_cl .col-md-6 {
        -ms-flex: 0 0 50%;
        flex: 0 0 50%;
        max-width: 50%;
    }
    #mx_cl .col-md-4 {
        -ms-flex: 0 0 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
    }
    #mx_cl .col-md-3 {
        -ms-flex: 0 0 25%;
        flex: 0 0 25%;
        max-width: 25%;
    }
}
@media (min-width: 992px){
    #mx_cl .container {
        max-width: 950px;
    }
}
@media (min-width: 1200px) {
    #mx_cl .container {
        max-width: 1000px;
    }
}
#mx_cl .hide-td {
    display: none;
}
#mx_cl .input-sec {
    width: 100%;
    display: block;
    background: #fff;
    padding: 2rem;
    border: 1px solid #d9d9d9;
    border-radius: 8px 0 0 8px;
}
#mx_cl .output-sec {
    width: 100%;
    display: block;
    background: #2BBACC;
    padding: 2rem;
    border: 1px solid #2BBACC;
    border-radius: 8px;
    color: #ffffff;
    margin-left: -2px;
    box-shadow: 0 0 10px #8d8d8d;
}
#mx_cl .sum-sec {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-top: 2rem;
}
#mx_cl .sum-title {
    background: #00a4b9;
    color: #fff;
    padding: 5px 15px;
    margin-bottom: 8px;
    font-size: 18px;
}
#mx_cl #sum_vl {
    font-size: 25px;
}
#mx_cl .sum_suffix {
    font-size: 12px;
}
#mx_cl .pd-0 {
    padding: 0;
}
#mx_cl .sp-pd-top {
    padding-top: 28px;
}
#mx_cl .sum-tb-head {
    background: #00a4b9;
}
#mx_cl .text-right {
    text-align: right !important;
}
#mx_cl .cross-sign {
    background: #00a4b9;
    padding: 5px;
    border-radius: 25px;
    width: 18px;
    height: 18px;
    display: block;
    line-height: 6px;
    text-align: center;
    cursor: pointer;
}
@media (max-width: 768px){
    #mx_cl .input-sec {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 10px;
    }
    #mx_cl .output-sec {
        padding: 1rem;
        margin-left: 0;
    }
    #mx_cl .form-control {
        height: auto;
        padding: .175rem .75rem;
    }
    #mx_cl label {
        font-size: 14px;
    }
}
#mx_cl #t_foot {
    display: none;
}
</style>
<div class="ms-cl" id="mx_cl">
    <p class="text-center" style="margin: 0;margin-bottom: 15px;">
        <img src="https://i.postimg.cc/HnnQQLCV/sm-logo.png" style="width: 160px;" />
    </p>
    <div class="container">
        <div class="row">
            <div class="col-md-6 pd-0 sp-pd-top">
                <div class="input-sec">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-group">
                                <label for="mx_in_1">Sterile Injectable</label>
                                <select name="mx_in_1" class="form-control cl-required" id="mx_in_1">
                                    <option value="">-</option>
                                    <option value="0.12">Alpha-Lipoic Acid</option>
                                    <option value="4.423">Amino Blend</option>
                                    <option value="6.05">Ascorbic Acid</option>
                                    <option value="0.011">Biotin</option>
                                    <option value="2.04">Calcium Chloride</option>
                                    <option value="0.01">Copper Sulfate</option>
                                    <option value="1.36">Dexapanthenol (B5)</option>
                                    <option value="0.32">Folic Acid | Hydroxocobalamin</option>
                                    <option value="0.77">Glucosamine Sulfate</option>
                                    <option value="0.31">Hydroxocobalamin (B12)</option>
                                    <option value="0.273">Lactated Ringers (LR)</option>
                                    <option value="3.02">L-Arginine</option>
                                    <option value="10.05">L-Carnitine</option>
                                    <option value="2.16">L-Glutathione</option>
                                    <option value="1.09">L-Lysine</option>
                                    <option value="0.86">L-Proline</option>
                                    <option value="0.95">L-Taurine</option>
                                    <option value="2.95">Magnesium Chloride</option>
                                    <option value="0.001">Manganese Sulfate</option>
                                    <option value="2.00">Methylcobalamin (B12)</option>
                                    <option value="9.33">Myer's Cocktail</option>
                                    <option value="1.22">N-Acetyl-Cysteine</option>
                                    <option value="7.96">NAD+</option>
                                    <option value="2.53">Mineral Blend</option>
                                    <option value="2.04">Vita Complex</option>
                                    <option value="0.2">L â€“ Glutamine</option>
                                    <option value="0.31">Odansetron</option>
                                    <option value="1.60">Pyridoxine (B6)</option>
                                    <option value="0.10">Selenium</option>
                                    <option value="0.308">Sodium Chloride</option>
                                    <option value="4.5">Tri-Immune Boost</option>
                                    <option value="0.011">Zinc Chloride</option>
                                    <option value="0.06955">Zinc Sulfate</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="mx_in_2">Volume(ml)</label>
                                <input type="number" name="mx_in_2" class="form-control cl-required" value="" id="mx_in_2" />
                            </div>
                        </div>
                        <div class="col-md-8"></div>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary" style="width: 100%;" id="mx_btn_add">Add</button>  
                        </div>
                    </div>  
                </div>            
            </div>
            <div class="col-md-6 pd-0">
                <div class="output-sec">
                    <table class="table" id="mx_rs_data">
                        <thead>
                            <tr class="sum-tb-head">
                                <th>Description</th>
                                <th class="text-right">Volume</th>
                                <th class="text-right">mOsm/ml</th>
                                <th class="text-right">mOsm</th>
                                <th style="width: 14px;"></th>
                            </tr>
                        </thead>
                        <tbody id="item_list">
                            
                        </tbody>
                        <tbody id="no_list">
                            <tr>
                                <td colspan="5" class="text-center">No item found!</td>
                            </tr>
                        </tbody>
                        <tfoot id="t_foot">
                            <tr class="sum-tb-head">
                                <th>Total</th>
                                <th class="text-right" id="total_ml"></th>
                                <th class="text-right"></th>
                                <th class="text-right" id="total_mosm"></th>
                                <th style="width: 14px;"></th>
                            </tr>
                        </tfoot>
                    </table>
                    <div class="sum-sec">
                        <div class="sum-title">Osmolarity of Admixture</div>
                        <div class="sum-value"><span id="sum_vl">0</span> <span class="sum_suffix">mOsm/L</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    jQuery(document).ready(function($){
        let mx_in_1, mx_in_2;
        
        const mx_nft = Intl.NumberFormat("en-US", {
            minimumFractionDigits:0,
            maximumFractionDigits:0
        });
        const mx_nftd = Intl.NumberFormat("en-US", {
            minimumFractionDigits:2,
            maximumFractionDigits:2
        });

        $("#mx_btn_add").on("click", function(){
            mx_add_items();
            mx_calc();
        });

        $(document).on("click", ".cross-sign", function(){
            $(this).closest("tr").remove();
            mx_calc();
        });

        function mx_add_items(){
            mx_in_1 = mx_removeSing($("#mx_in_1").val());
            mx_in_2 = mx_removeSing($("#mx_in_2").val());
            let des = $("#mx_in_1 option:selected").text();

            if(mx_in_1 && mx_in_2 > 0){
                $("#item_list").append(item_row(des, mx_in_2, mx_in_1));
                $("#no_list").hide();
                $("#t_foot").show();
            }
        }

        function item_row(title, ml, mosm_ml){
            let mosm = ml * mosm_ml;

            let row = `<tr>
                            <td>${title}</td>
                            <td class="text-right">
                                <span class="ml">${ml}ml</span>
                                <span class="ml_vl hide-td">${ml}</span>
                            </td>
                            <td class="text-right">
                                <span class="mosm_ml">${mosm_ml.toFixed(2)}</span>
                                <span class="mosm_ml_vl hide-td">${mosm_ml}</span>
                            </td>
                            <td class="text-right">
                                <span class="mosm">${mosm.toFixed(2)}</span>
                                <span class="mosm_vl hide-td">${mosm}</span>
                            </td>
                            <td><span class="cross-sign">x</span></td>
                        </tr>`;
            return row;
        }

        function mx_removeSing(vl){
            return Number(vl.replace(/\$|%|,/g, ''));
        }

        function mx_calc(){
            let total_item = $("#item_list tr").length;
            
            if(total_item > 0){
                let total_vl = 0;
                let total_mosm = 0;

                $("#item_list tr").each((i, elm) => {
                    total_vl = total_vl + Number($(elm).find(".ml_vl").text());
                    total_mosm = total_mosm + Number($(elm).find(".mosm_vl").text());
                });

                sum_vl = (total_mosm/total_vl)*1000;

                $("#total_ml").text(mx_nft.format(total_vl)+"ml");
                $("#total_mosm").text(mx_nftd.format(total_mosm));

                $("#sum_vl").text(mx_nft.format(sum_vl));
            } else {
                $("#t_foot").hide();
                $("#no_list").show();
                $("#sum_vl").text(0);
            }
        }
    });
</script>
